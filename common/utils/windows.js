'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

// shortcuts / helpers
var PI = Math.PI;
var cos = Math.cos;
var sin = Math.sin;
var sqrt = Math.sqrt;

// window creation functions
function initHannWindow(buffer, size, normCoefs) {
  var linSum = 0;
  var powSum = 0;
  var step = 2 * PI / size;

  for (var i = 0; i < size; i++) {
    var phi = i * step;
    var value = 0.5 - 0.5 * cos(phi);

    buffer[i] = value;

    linSum += value;
    powSum += value * value;
  }

  normCoefs.linear = size / linSum;
  normCoefs.power = sqrt(size / powSum);
}

function initHammingWindow(buffer, size, normCoefs) {
  var linSum = 0;
  var powSum = 0;
  var step = 2 * PI / size;

  for (var i = 0; i < size; i++) {
    var phi = i * step;
    var value = 0.54 - 0.46 * cos(phi);

    buffer[i] = value;

    linSum += value;
    powSum += value * value;
  }

  normCoefs.linear = size / linSum;
  normCoefs.power = sqrt(size / powSum);
}

function initBlackmanWindow(buffer, size, normCoefs) {
  var linSum = 0;
  var powSum = 0;
  var step = 2 * PI / size;

  for (var i = 0; i < size; i++) {
    var phi = i * step;
    var value = 0.42 - 0.5 * cos(phi) + 0.08 * cos(2 * phi);

    buffer[i] = value;

    linSum += value;
    powSum += value * value;
  }

  normCoefs.linear = size / linSum;
  normCoefs.power = sqrt(size / powSum);
}

function initBlackmanHarrisWindow(buffer, size, normCoefs) {
  var linSum = 0;
  var powSum = 0;
  var a0 = 0.35875;
  var a1 = 0.48829;
  var a2 = 0.14128;
  var a3 = 0.01168;
  var step = 2 * PI / size;

  for (var i = 0; i < size; i++) {
    var phi = i * step;
    var value = a0 - a1 * cos(phi) + a2 * cos(2 * phi);-a3 * cos(3 * phi);

    buffer[i] = value;

    linSum += value;
    powSum += value * value;
  }

  normCoefs.linear = size / linSum;
  normCoefs.power = sqrt(size / powSum);
}

function initSineWindow(buffer, size, normCoefs) {
  var linSum = 0;
  var powSum = 0;
  var step = PI / size;

  for (var i = 0; i < size; i++) {
    var phi = i * step;
    var value = sin(phi);

    buffer[i] = value;

    linSum += value;
    powSum += value * value;
  }

  normCoefs.linear = size / linSum;
  normCoefs.power = sqrt(size / powSum);
}

function initRectangleWindow(buffer, size, normCoefs) {
  for (var i = 0; i < size; i++) {
    buffer[i] = 1;
  } // @todo - check if these are proper values
  normCoefs.linear = 1;
  normCoefs.power = 1;
}

/**
 * Create a buffer with window signal.
 *
 * @param {String} name - Name of the window.
 * @param {Float32Array} buffer - Buffer to be populated with the window signal.
 * @param {Number} size - Size of the buffer.
 * @param {Object} normCoefs - Object to be populated with the normailzation
 *  coefficients.
 */
function initWindow(name, buffer, size, normCoefs) {
  name = name.toLowerCase();

  switch (name) {
    case 'hann':
    case 'hanning':
      initHannWindow(buffer, size, normCoefs);
      break;
    case 'hamming':
      initHammingWindow(buffer, size, normCoefs);
      break;
    case 'blackman':
      initBlackmanWindow(buffer, size, normCoefs);
      break;
    case 'blackmanharris':
      initBlackmanHarrisWindow(buffer, size, normCoefs);
      break;
    case 'sine':
      initSineWindow(buffer, size, normCoefs);
      break;
    case 'rectangle':
      initRectangleWindow(buffer, size, normCoefs);
      break;
  }
}

exports.default = initWindow;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndpbmRvd3MuanMiXSwibmFtZXMiOlsiUEkiLCJNYXRoIiwiY29zIiwic2luIiwic3FydCIsImluaXRIYW5uV2luZG93IiwiYnVmZmVyIiwic2l6ZSIsIm5vcm1Db2VmcyIsImxpblN1bSIsInBvd1N1bSIsInN0ZXAiLCJpIiwicGhpIiwidmFsdWUiLCJsaW5lYXIiLCJwb3dlciIsImluaXRIYW1taW5nV2luZG93IiwiaW5pdEJsYWNrbWFuV2luZG93IiwiaW5pdEJsYWNrbWFuSGFycmlzV2luZG93IiwiYTAiLCJhMSIsImEyIiwiYTMiLCJpbml0U2luZVdpbmRvdyIsImluaXRSZWN0YW5nbGVXaW5kb3ciLCJpbml0V2luZG93IiwibmFtZSIsInRvTG93ZXJDYXNlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFDQTtBQUNBLElBQU1BLEtBQU9DLEtBQUtELEVBQWxCO0FBQ0EsSUFBTUUsTUFBT0QsS0FBS0MsR0FBbEI7QUFDQSxJQUFNQyxNQUFPRixLQUFLRSxHQUFsQjtBQUNBLElBQU1DLE9BQU9ILEtBQUtHLElBQWxCOztBQUVBO0FBQ0EsU0FBU0MsY0FBVCxDQUF3QkMsTUFBeEIsRUFBZ0NDLElBQWhDLEVBQXNDQyxTQUF0QyxFQUFpRDtBQUMvQyxNQUFJQyxTQUFTLENBQWI7QUFDQSxNQUFJQyxTQUFTLENBQWI7QUFDQSxNQUFNQyxPQUFPLElBQUlYLEVBQUosR0FBU08sSUFBdEI7O0FBRUEsT0FBSyxJQUFJSyxJQUFJLENBQWIsRUFBZ0JBLElBQUlMLElBQXBCLEVBQTBCSyxHQUExQixFQUErQjtBQUM3QixRQUFNQyxNQUFNRCxJQUFJRCxJQUFoQjtBQUNBLFFBQU1HLFFBQVEsTUFBTSxNQUFNWixJQUFJVyxHQUFKLENBQTFCOztBQUVBUCxXQUFPTSxDQUFQLElBQVlFLEtBQVo7O0FBRUFMLGNBQVVLLEtBQVY7QUFDQUosY0FBVUksUUFBUUEsS0FBbEI7QUFDRDs7QUFFRE4sWUFBVU8sTUFBVixHQUFtQlIsT0FBT0UsTUFBMUI7QUFDQUQsWUFBVVEsS0FB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SUFBdkIsRUFBNkJDLFNBQTdCO0FBQ0E7QUFDRixTQUFLLFdBQUw7QUFDRWlCLDBCQUFvQm5CLE1BQXBCLEVBQTRCQyxJQUE1QixFQUFrQ0MsU0FBbEM7QUFDQTtBQW5CSjtBQXFCRDs7a0JBRWNrQixVIiwiZmlsZSI6IndpbmRvd3MuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbi8vIHNob3J0Y3V0cyAvIGhlbHBlcnNcbmNvbnN0IFBJICAgPSBNYXRoLlBJO1xuY29uc3QgY29zICA9IE1hdGguY29zO1xuY29uc3Qgc2luICA9IE1hdGguc2luO1xuY29uc3Qgc3FydCA9IE1hdGguc3FydDtcblxuLy8gd2luZG93IGNyZWF0aW9uIGZ1bmN0aW9uc1xuZnVuY3Rpb24gaW5pdEhhbm5XaW5kb3coYnVmZmVyLCBzaXplLCBub3JtQ29lZnMpIHtcbiAgbGV0IGxpblN1bSA9IDA7XG4gIGxldCBwb3dTdW0gPSAwO1xuICBjb25zdCBzdGVwID0gMiAqIFBJIC8gc2l6ZTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHNpemU7IGkrKykge1xuICAgIGNvbnN0IHBoaSA9IGkgKiBzdGVwO1xuICAgIGNvbnN0IHZhbHVlID0gMC41IC0gMC41ICogY29zKHBoaSk7XG5cbiAgICBidWZmZXJbaV0gPSB2YWx1ZTtcblxuICAgIGxpblN1bSArPSB2YWx1ZTtcbiAgICBwb3dTdW0gKz0gdmFsdWUgKiB2YWx1ZTtcbiAgfVxuXG4gIG5vcm1Db2Vmcy5saW5lYXIgPSBzaXplIC8gbGluU3VtO1xuICBub3JtQ29lZnMucG93ZXIgPSBzcXJ0KHNpemUgLyBwb3dTdW0pO1xufVxuXG5mdW5jdGlvbiBpbml0SGFtbWluZ1dpbmRvdyhidWZmZXIsIHNpemUsIG5vcm1Db2Vmcykge1xuICBsZXQgbGluU3VtID0gMDtcbiAgbGV0IHBvd1N1bSA9IDA7XG4gIGNvbnN0IHN0ZXAgPSAyICogUEkgLyBzaXplO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7XG4gICAgY29uc3QgcGhpID0gaSAqIHN0ZXA7XG4gICAgY29uc3QgdmFsdWUgPSAwLjU0IC0gMC40NiAqIGNvcyhwaGkpO1xuXG4gICAgYnVmZmVyW2ldID0gdmFsdWU7XG5cbiAgICBsaW5TdW0gKz0gdmFsdWU7XG4gICAgcG93U3VtICs9IHZhbHVlICogdmFsdWU7XG4gIH1cblxuICBub3JtQ29lZnMubGluZWFyID0gc2l6ZSAvIGxpblN1bTtcbiAgbm9ybUNvZWZzLnBvd2VyID0gc3FydChzaXplIC8gcG93U3VtKTtcbn1cblxuZnVuY3Rpb24gaW5pdEJsYWNrbWFuV2luZG93KGJ1ZmZlciwgc2l6ZSwgbm9ybUNvZWZzKSB7XG4gIGxldCBsaW5TdW0gPSAwO1xuICBsZXQgcG93U3VtID0gMDtcbiAgY29uc3Qgc3RlcCA9IDIgKiBQSSAvIHNpemU7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaXplOyBpKyspIHtcbiAgICBjb25zdCBwaGkgPSBpICogc3RlcDtcbiAgICBjb25zdCB2YWx1ZSA9IDAuNDIgLSAwLjUgKiBjb3MocGhpKSArIDAuMDggKiBjb3MoMiAqIHBoaSk7XG5cbiAgICBidWZmZXJbaV0gPSB2YWx1ZTtcblxuICAgIGxpblN1bSArPSB2YWx1ZTtcbiAgICBwb3dTdW0gKz0gdmFsdWUgKiB2YWx1ZTtcbiAgfVxuXG4gIG5vcm1Db2Vmcy5saW5lYXIgPSBzaXplIC8gbGluU3VtO1xuICBub3JtQ29lZnMucG93ZXIgPSBzcXJ0KHNpemUgLyBwb3dTdW0pO1xufVxuXG5mdW5jdGlvbiBpbml0QmxhY2ttYW5IYXJyaXNXaW5kb3coYnVmZmVyLCBzaXplLCBub3JtQ29lZnMpIHtcbiAgbGV0IGxpblN1bSA9IDA7XG4gIGxldCBwb3dTdW0gPSAwO1xuICBjb25zdCBhMCA9IDAuMzU4NzU7XG4gIGNvbnN0IGExID0gMC40ODgyOTtcbiAgY29uc3QgYTIgPSAwLjE0MTI4O1xuICBjb25zdCBhMyA9IDAuMDExNjg7XG4gIGNvbnN0IHN0ZXAgPSAyICogUEkgLyBzaXplO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7XG4gICAgY29uc3QgcGhpID0gaSAqIHN0ZXA7XG4gICAgY29uc3QgdmFsdWUgPSBhMCAtIGExICogY29zKHBoaSkgKyBhMiAqIGNvcygyICogcGhpKTsgLSBhMyAqIGNvcygzICogcGhpKTtcblxuICAgIGJ1ZmZlcltpXSA9IHZhbHVlO1xuXG4gICAgbGluU3VtICs9IHZhbHVlO1xuICAgIHBvd1N1bSArPSB2YWx1ZSAqIHZhbHVlO1xuICB9XG5cbiAgbm9ybUNvZWZzLmxpbmVhciA9IHNpemUgLyBsaW5TdW07XG4gIG5vcm1Db2Vmcy5wb3dlciA9IHNxcnQoc2l6ZSAvIHBvd1N1bSk7XG59XG5cbmZ1bmN0aW9uIGluaXRTaW5lV2luZG93KGJ1ZmZlciwgc2l6ZSwgbm9ybUNvZWZzKSB7XG4gIGxldCBsaW5TdW0gPSAwO1xuICBsZXQgcG93U3VtID0gMDtcbiAgY29uc3Qgc3RlcCA9IFBJIC8gc2l6ZTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHNpemU7IGkrKykge1xuICAgIGNvbnN0IHBoaSA9IGkgKiBzdGVwO1xuICAgIGNvbnN0IHZhbHVlID0gc2luKHBoaSk7XG5cbiAgICBidWZmZXJbaV0gPSB2YWx1ZTtcblxuICAgIGxpblN1bSArPSB2YWx1ZTtcbiAgICBwb3dTdW0gKz0gdmFsdWUgKiB2YWx1ZTtcbiAgfVxuXG4gIG5vcm1Db2Vmcy5saW5lYXIgPSBzaXplIC8gbGluU3VtO1xuICBub3JtQ29lZnMucG93ZXIgPSBzcXJ0KHNpemUgLyBwb3dTdW0pO1xufVxuXG5mdW5jdGlvbiBpbml0UmVjdGFuZ2xlV2luZG93KGJ1ZmZlciwgc2l6ZSwgbm9ybUNvZWZzKSB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgaSsrKVxuICAgIGJ1ZmZlcltpXSA9IDE7XG5cbiAgLy8gQHRvZG8gLSBjaGVjayBpZiB0aGVzZSBhcmUgcHJvcGVyIHZhbHVlc1xuICBub3JtQ29lZnMubGluZWFyID0gMTtcbiAgbm9ybUNvZWZzLnBvd2VyID0gMTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBidWZmZXIgd2l0aCB3aW5kb3cgc2lnbmFsLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIC0gTmFtZSBvZiB0aGUgd2luZG93LlxuICogQHBhcmFtIHtGbG9hdDMyQXJyYXl9IGJ1ZmZlciAtIEJ1ZmZlciB0byBiZSBwb3B1bGF0ZWQgd2l0aCB0aGUgd2luZG93IHNpZ25hbC5cbiAqIEBwYXJhbSB7TnVtYmVyfSBzaXplIC0gU2l6ZSBvZiB0aGUgYnVmZmVyLlxuICogQHBhcmFtIHtPYmplY3R9IG5vcm1Db2VmcyAtIE9iamVjdCB0byBiZSBwb3B1bGF0ZWQgd2l0aCB0aGUgbm9ybWFpbHphdGlvblxuICogIGNvZWZmaWNpZW50cy5cbiAqL1xuZnVuY3Rpb24gaW5pdFdpbmRvdyhuYW1lLCBidWZmZXIsIHNpemUsIG5vcm1Db2Vmcykge1xuICBuYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuXG4gIHN3aXRjaCAobmFtZSkge1xuICAgIGNhc2UgJ2hhbm4nOlxuICAgIGNhc2UgJ2hhbm5pbmcnOlxuICAgICAgaW5pdEhhbm5XaW5kb3coYnVmZmVyLCBzaXplLCBub3JtQ29lZnMpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnaGFtbWluZyc6XG4gICAgICBpbml0SGFtbWluZ1dpbmRvdyhidWZmZXIsIHNpemUsIG5vcm1Db2Vmcyk7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdibGFja21hbic6XG4gICAgICBpbml0QmxhY2ttYW5XaW5kb3coYnVmZmVyLCBzaXplLCBub3JtQ29lZnMpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnYmxhY2ttYW5oYXJyaXMnOlxuICAgICAgaW5pdEJsYWNrbWFuSGFycmlzV2luZG93KGJ1ZmZlciwgc2l6ZSwgbm9ybUNvZWZzKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ3NpbmUnOlxuICAgICAgaW5pdFNpbmVXaW5kb3coYnVmZmVyLCBzaXplLCBub3JtQ29lZnMpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAncmVjdGFuZ2xlJzpcbiAgICAgIGluaXRSZWN0YW5nbGVXaW5kb3coYnVmZmVyLCBzaXplLCBub3JtQ29lZnMpO1xuICAgICAgYnJlYWs7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgaW5pdFdpbmRvdztcblxuXG4iXX0=